import{u as w,r as d,j as e,L as j}from"./index-9gsVz5yT.js";import{a as P,r as y}from"./APIRoutes-0YhX2Giu.js";import{L as k,y as g}from"./index-CkmCRH51.js";function C(){const i=w(),[m,f]=d.useState({username:"",email:"",password:"",confirmPassword:""}),l={position:"bottom-right",autoclose:8e3,draggable:!0};d.useEffect(()=>{JSON.parse(localStorage.getItem("current-chat-user"))?.username&&i("/")},[]);function n(s){f({...m,[s.target.name]:s.target.value})}function p(s,a,t,r){return s?r?a?t?a!=t?{message:"Passwords do not match. Try again",ok:!1}:r.match(/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/)?{message:"Register successfully",ok:!0}:{message:"This does not seem like a valid email. Please enter a new email",ok:!1}:{message:"ConfirmPassword is missing. Please enter confirmPassword",ok:!1}:{message:"Password is missing. Please enter password",ok:!1}:{message:"Email is missing. Please enter email",ok:!1}:{message:"Username is missing. Please enter username",ok:!1}}const h=async s=>{s.preventDefault();const{username:a,email:t,password:r,confirmPassword:x}=m,u=p(a,r,x,t);if(!u.ok){g.error(u.message,l);return}try{const o=(await P.post(y,{password:r,email:t,username:a})).data;o.status===!1?g.error(o.message,l):(localStorage.setItem("current-chat-user",JSON.stringify(o.user)),i("/set-avt"))}catch(c){console.error(c)}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"auth-form-container",children:e.jsxs("form",{onSubmit:h,children:[e.jsx("h1",{children:"Register"}),e.jsx("input",{type:"text",placeholder:"Username",name:"username",onChange:n}),e.jsx("input",{type:"text",placeholder:"Email",name:"email",onChange:n}),e.jsx("input",{type:"password",placeholder:"Password",name:"password",onChange:n}),e.jsx("input",{type:"password",placeholder:"Confirm password",name:"confirmPassword",onChange:n}),e.jsx("button",{type:"submit",children:"Sign Up"}),e.jsxs("p",{children:["Have an account? ",e.jsx(j,{to:"/login",children:"Login here"})]})]})}),e.jsx(k,{})]})}export{C as default};
