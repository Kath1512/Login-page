import{r as s,u as h,j as t}from"./index-9gsVz5yT.js";import{a as x,S}from"./APIRoutes-0YhX2Giu.js";import"./index-CkmCRH51.js";function w(){const[a,i]=s.useState(""),[n,u]=s.useState(!1),[o,v]=s.useState(null),r=h();s.useEffect(()=>{localStorage.getItem("current-chat-user")||r("/register");const e=JSON.parse(localStorage.getItem("current-chat-user"));e?.avatarLink?r("/"):v(e)},[]);async function f(e){e.preventDefault();try{const c=(await x.post(S,{username:o.username,avatarLink:a})).data;c.status&&(localStorage.setItem("current-chat-user",JSON.stringify({...o,avatar:{link:a}})),r("/"),console.log(c.message))}catch(l){console.error(l)}}function m(e){e.preventDefault(),u(!n)}function p(e){e.preventDefault(),i("https://static.vecteezy.com/system/resources/previews/009/292/244/non_2x/default-avatar-icon-of-social-media-user-vector.jpg")}function d(e){e.preventDefault(),r("/")}return t.jsxs("form",{onSubmit:f,id:"set-avt",children:[t.jsx("label",{htmlFor:"set-avt",children:t.jsx("h1",{children:"Enter your avatar image address:"})}),t.jsx("input",{type:"text",value:a,name:"set-avt",onChange:e=>i(e.target.value)}),t.jsxs("div",{className:"all-buttons",children:[t.jsx("button",{onClick:p,children:"Set as default"}),t.jsx("button",{onClick:m,children:n?"Close preview":"Preview"}),t.jsx("button",{type:"Submit",children:"Confirm"}),t.jsx("button",{onClick:d,children:"Cancel"})]}),n&&t.jsx("img",{src:a,alt:"User's avatar preview",className:"avt-preview"})]})}export{w as default};
